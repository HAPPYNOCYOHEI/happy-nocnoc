{%- comment -%}
  Render product badges without JS / API calls.
  - Reads badge tag names from theme settings (custom_product_badge_group_*_tag_names)
  - If the product has matching tags, render up to 6 badges to reuse existing CSS (.product-badge-1..6)
  Usage:
    {% render 'product-badges', product: product %}
{%- endcomment -%}

{%- liquid
  if product == blank
    break
  endif

  assign product_tags = product.tags
  assign badge_tags_1 = settings.custom_product_badge_group_1_tag_names | split: ', '
  assign badge_tags_2 = settings.custom_product_badge_group_2_tag_names | split: ', '
  assign badge_tags_3 = settings.custom_product_badge_group_3_tag_names | split: ', '
  assign badge_tags_4 = settings.custom_product_badge_group_4_tag_names | split: ', '
  assign badge_tags = badge_tags_1 | concat: badge_tags_2 | concat: badge_tags_3 | concat: badge_tags_4

  assign badge_index = 0
-%}

<div class="product-badge-container">
  {%- for badge_tag in badge_tags -%}
    {%- if badge_index >= 6 -%}
      {%- break -%}
    {%- endif -%}
    {%- for product_tag in product_tags -%}
      {%- assign product_tag_lower = product_tag | downcase -%}
      {%- assign badge_tag_lower = badge_tag | downcase -%}
      {%- if product_tag_lower == badge_tag_lower -%}
        {%- assign badge_index = badge_index | plus: 1 -%}
        <div class="product-badge product-badge-{{ badge_index }}">{{ badge_tag }}</div>
        {%- break -%}
      {%- endif -%}
    {%- endfor -%}
  {%- endfor -%}
</div>

